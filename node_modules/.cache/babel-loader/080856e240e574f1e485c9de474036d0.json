{"ast":null,"code":"import produce from 'immer';\nimport { pullAllRoom } from '../pullDataFunc/pullData';\nconst INIT_SOCKET = 'roomAndChannel/INIT_SOCKET';\nconst SET_MYID = 'roomAndChannel/SET_MYID';\nconst ADD_ROOM = 'roomAndChannel/ADD_ROOM';\nconst SELECT_ROOM = 'roomAndChannel/SELECT_ROOM';\nconst ADD_CHANNEL = 'roomAndChannel/ADD_CHANNEL';\nconst SELECT_CHANNEL = 'roomAndChannel/SELECT_CHANNEL';\nconst RECEIVE_CHAT = 'roomAndChannel/RECEIVE_CHAT';\nconst PULL_ROOM = 'roomAndChannel/PULL_ROOM';\nexport const pullRoom = () => {\n  const rooms = pullAllRoom();\n  return {\n    type: PULL_ROOM,\n    rooms: rooms\n  };\n};\nexport const initSocket = socket => ({\n  type: INIT_SOCKET,\n  socket: socket\n});\nexport const setMyid = id => ({\n  type: SET_MYID,\n  id: id\n});\nexport const addRoom = roomName => ({\n  type: ADD_ROOM,\n  room: {\n    id: nextRoomId++,\n    name: roomName,\n    channels: []\n  }\n});\nexport const selectRoom = roomId => ({\n  type: SELECT_ROOM,\n  id: roomId\n});\nexport const addChannel = (id, channelName) => ({\n  type: ADD_CHANNEL,\n  channel: {\n    id: id,\n    name: channelName,\n    chat: []\n  }\n});\nexport const selectChannel = channelId => ({\n  type: SELECT_CHANNEL,\n  id: channelId\n});\nexport const receiveChat = chat => ({\n  type: RECEIVE_CHAT,\n  chat: chat\n});\nlet nextRoomId = 1;\nconst initialState = {\n  socket: null,\n  myid: 5469775,\n  selectRoom: 0,\n  selectChannel: 0,\n  rooms: [{\n    id: 1,\n    name: 'first room',\n    channels: [{\n      id: 1,\n      name: '1-1 channel',\n      chat: []\n    }, {\n      id: 2,\n      name: '1-2 channel',\n      chat: [// {\n        //     id: 5555555,\n        //     name: '김수환',\n        //     time: '4:22 PM',\n        //     content: '안녕하세요 여러분~!'\n        // },\n        // {\n        //     id: 5469775,\n        //     name: '이상철',\n        //     time: '5:34 AM',\n        //     content: '방가방가 여러분~!'\n        // },\n        // {\n        //     id: 6666666,\n        //     name: '병률짱',\n        //     time: '0:00 AM',\n        //     content: '에취!'\n        // },\n      ]\n    }]\n  }, {\n    id: 2,\n    name: 'second room',\n    channels: [{\n      id: 1,\n      name: '2-1 channel',\n      chat: []\n    }, {\n      id: 2,\n      name: '2-2 channel',\n      chat: []\n    }]\n  }]\n};\nexport default function roomAndChannel() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case INIT_SOCKET:\n      return { ...state,\n        socket: action.socket\n      };\n\n    case PULL_ROOM:\n      return { ...state\n      };\n\n    case SET_MYID:\n      return { ...state,\n        myid: action.id\n      };\n\n    case ADD_ROOM:\n      return { ...state,\n        rooms: state.rooms.concat(action.room)\n      };\n\n    case SELECT_ROOM:\n      return { ...state,\n        selectRoom: action.id,\n        selectChannel: 0\n      };\n\n    case ADD_CHANNEL:\n      return produce(state, draft => {\n        draft.rooms[state.selectRoom - 1].channels.push(action.channel);\n      });\n\n    case SELECT_CHANNEL:\n      return { ...state,\n        selectChannel: action.id\n      };\n\n    case RECEIVE_CHAT:\n      let sendRoom;\n      let sendChannel;\n      state.rooms.map(room => {\n        if (room.name == action.chat.channel_name) {\n          sendRoom = room.id;\n          room.channels.map(channel => {\n            if (channel.name == action.chat.room_name) {\n              sendChannel = channel.id;\n            }\n          });\n        }\n      });\n      return produce(state, draft => {\n        draft.rooms[sendRoom - 1].channels[sendChannel - 1].chat.push(action.chat);\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/isangcheol/Desktop/project/nisl/nisl/src/Components/modules/roomAndChannel.js"],"names":["produce","pullAllRoom","INIT_SOCKET","SET_MYID","ADD_ROOM","SELECT_ROOM","ADD_CHANNEL","SELECT_CHANNEL","RECEIVE_CHAT","PULL_ROOM","pullRoom","rooms","type","initSocket","socket","setMyid","id","addRoom","roomName","room","nextRoomId","name","channels","selectRoom","roomId","addChannel","channelName","channel","chat","selectChannel","channelId","receiveChat","initialState","myid","roomAndChannel","state","action","concat","draft","push","sendRoom","sendChannel","map","channel_name","room_name"],"mappings":"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","sourcesContent":["import produce from 'immer';\nimport { pullAllRoom } from '../pullDataFunc/pullData';\n\nconst INIT_SOCKET = 'roomAndChannel/INIT_SOCKET';\nconst SET_MYID = 'roomAndChannel/SET_MYID';\nconst ADD_ROOM = 'roomAndChannel/ADD_ROOM';\nconst SELECT_ROOM = 'roomAndChannel/SELECT_ROOM';\nconst ADD_CHANNEL = 'roomAndChannel/ADD_CHANNEL';\nconst SELECT_CHANNEL = 'roomAndChannel/SELECT_CHANNEL';\nconst RECEIVE_CHAT = 'roomAndChannel/RECEIVE_CHAT';\nconst PULL_ROOM = 'roomAndChannel/PULL_ROOM';\n\nexport const pullRoom = () => {\n    const rooms = pullAllRoom();\n    return ({\n        type: PULL_ROOM,\n        rooms: rooms,\n    })\n}\n\nexport const initSocket = socket => ({\n    type: INIT_SOCKET,\n    socket: socket,\n})\n\nexport const setMyid = id => ({\n    type: SET_MYID,\n    id: id,\n})\nexport const addRoom = roomName => ({\n    type: ADD_ROOM,\n    room: {\n        id: nextRoomId++,\n        name: roomName,\n        channels: [],\n    },\n})\n\nexport const selectRoom = roomId => ({\n    type: SELECT_ROOM,\n    id: roomId,\n})\n\nexport const addChannel = (id, channelName) => ({\n    type: ADD_CHANNEL,\n    channel: {\n        id: id,\n        name: channelName,\n        chat: [\n\n        ]\n    }\n})\n\nexport const selectChannel = channelId => ({\n    type: SELECT_CHANNEL,\n    id: channelId,\n})\n\nexport const receiveChat = chat => ({\n    type: RECEIVE_CHAT,\n    chat: chat,\n})\n\nlet nextRoomId = 1;\n\nconst initialState = {\n    socket: null,\n    myid: 5469775,\n    selectRoom: 0,\n    selectChannel: 0,\n    rooms: [\n        {\n            id: 1,\n            name: 'first room',\n            channels: [\n                {\n                    id: 1,\n                    name: '1-1 channel',\n                    chat: [\n\n                    ]\n                },\n                {\n                    id: 2,\n                    name: '1-2 channel',\n                    chat: [\n                        // {\n                        //     id: 5555555,\n                        //     name: '김수환',\n                        //     time: '4:22 PM',\n                        //     content: '안녕하세요 여러분~!'\n                        // },\n                        // {\n                        //     id: 5469775,\n                        //     name: '이상철',\n                        //     time: '5:34 AM',\n                        //     content: '방가방가 여러분~!'\n                        // },\n                        // {\n                        //     id: 6666666,\n                        //     name: '병률짱',\n                        //     time: '0:00 AM',\n                        //     content: '에취!'\n                        // },\n                    ]\n                },\n            ]\n        },\n        {\n            id: 2,\n            name: 'second room',\n            channels: [\n                {\n                    id: 1,\n                    name: '2-1 channel',\n                    chat: []\n                },\n                {\n                    id: 2,\n                    name: '2-2 channel',\n                    chat: []\n                },\n            ]\n        },\n    ],\n};\n\nexport default function roomAndChannel(state = initialState, action) {\n    switch (action.type) {\n        case INIT_SOCKET:\n            return { ...state, socket: action.socket }\n        case PULL_ROOM:\n            return { ...state, }\n        case SET_MYID:\n            return { ...state, myid: action.id }\n        case ADD_ROOM:\n            return { ...state, rooms: state.rooms.concat(action.room) };\n        case SELECT_ROOM:\n            return { ...state, selectRoom: action.id, selectChannel: 0 };\n        case ADD_CHANNEL:\n            return produce(state, draft => {\n                draft.rooms[state.selectRoom - 1].channels.push(action.channel);\n            })\n        case SELECT_CHANNEL:\n            return { ...state, selectChannel: action.id };\n        case RECEIVE_CHAT:\n            let sendRoom;\n            let sendChannel;\n            state.rooms.map(room => {\n                if (room.name == action.chat.channel_name) {\n                    sendRoom = room.id\n                    room.channels.map(channel => {\n                        if (channel.name == action.chat.room_name) {\n                            sendChannel = channel.id\n                        }\n                    })\n                }\n            })\n            return produce(state, draft => {\n                draft.rooms[sendRoom - 1].channels[sendChannel - 1].chat.push(action.chat);\n            })\n        default:\n            return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}